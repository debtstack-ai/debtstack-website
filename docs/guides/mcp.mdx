---
title: MCP Integration
description: 'Connect DebtStack to Claude via Model Context Protocol'
---

## Overview

The Model Context Protocol (MCP) allows you to connect DebtStack directly to Claude Desktop, giving Claude access to corporate debt data in natural conversations.

## Installation

### 1. Install the MCP Server

```bash
npm install -g @debtstack/mcp-server
```

Or with pip:

```bash
pip install debtstack-mcp
```

### 2. Configure Claude Desktop

Add DebtStack to your Claude Desktop configuration:

**macOS:** `~/Library/Application Support/Claude/claude_desktop_config.json`

**Windows:** `%APPDATA%\Claude\claude_desktop_config.json`

```json
{
  "mcpServers": {
    "debtstack": {
      "command": "debtstack-mcp",
      "env": {
        "DEBTSTACK_API_KEY": "ds_xxxxx"
      }
    }
  }
}
```

### 3. Restart Claude Desktop

After saving the configuration, restart Claude Desktop to load the DebtStack server.

## Available Tools

Once configured, Claude has access to these DebtStack tools:

| Tool | Description |
|------|-------------|
| `search_companies` | Search companies by leverage, sector, debt metrics |
| `search_bonds` | Search bonds by yield, seniority, maturity |
| `resolve_bond` | Convert bond description to CUSIP |
| `get_pricing` | Get bond pricing (YTM, spread) |
| `get_guarantors` | Find entities guaranteeing a bond |
| `search_documents` | Search SEC filings |
| `get_company_changes` | Track debt structure changes |

## Example Conversations

### Leverage Analysis

**You:** Which of the MAG7 companies has the highest leverage?

**Claude:** Let me search for the MAG7 companies and compare their leverage ratios.

*[Uses search_companies tool]*

Based on my search, Tesla (TSLA) has the highest net leverage ratio among the MAG7 at 1.8x, followed by...

---

### Bond Screening

**You:** Find me bonds yielding more than 9%

**Claude:** I'll search for high-yield bonds with YTM above 9%.

*[Uses search_bonds tool]*

I found 15 bonds yielding over 9%. Here are the top results:
- RIG 8.00% Senior Notes due 2027: 9.42% YTM (CUSIP: 893830AK8)
- ...

---

### Structural Analysis

**You:** Does RIG's 8% 2027 bond have a parent company guarantee?

**Claude:** Let me check the guarantor structure for that bond.

*[Uses resolve_bond tool, then get_guarantors tool]*

Yes, RIG's 8.00% Senior Notes due 2027 (CUSIP: 893830AK8) has a full guarantee from Transocean Ltd., the parent holding company...

---

### Covenant Research

**You:** What are Charter's leverage covenants?

**Claude:** I'll search Charter's SEC filings for covenant details.

*[Uses search_documents tool]*

Based on Charter's credit agreement filings, the key leverage covenants are...

## Building a Custom MCP Server

If you want to customize the MCP server, here's a reference implementation:

```typescript
import { Server } from "@modelcontextprotocol/sdk/server/index.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";

const API_KEY = process.env.DEBTSTACK_API_KEY;
const BASE_URL = "https://api.debtstack.ai/v1";

const server = new Server(
  { name: "debtstack", version: "1.0.0" },
  { capabilities: { tools: {} } }
);

// Define tools
server.setRequestHandler("tools/list", async () => ({
  tools: [
    {
      name: "search_companies",
      description: "Search companies by leverage, sector, debt metrics",
      inputSchema: {
        type: "object",
        properties: {
          ticker: { type: "string", description: "Comma-separated tickers" },
          sector: { type: "string", description: "Business sector" },
          min_leverage: { type: "number", description: "Minimum leverage ratio" },
          fields: { type: "string", description: "Fields to return" }
        }
      }
    },
    {
      name: "search_bonds",
      description: "Search bonds by yield, seniority, maturity",
      inputSchema: {
        type: "object",
        properties: {
          ticker: { type: "string", description: "Company ticker" },
          min_ytm: { type: "number", description: "Minimum YTM (%)" },
          seniority: { type: "string", description: "senior_secured, senior_unsecured" },
          fields: { type: "string", description: "Fields to return" }
        }
      }
    },
    {
      name: "get_guarantors",
      description: "Find entities guaranteeing a bond",
      inputSchema: {
        type: "object",
        properties: {
          cusip: { type: "string", description: "Bond CUSIP" }
        },
        required: ["cusip"]
      }
    }
  ]
}));

// Handle tool calls
server.setRequestHandler("tools/call", async (request) => {
  const { name, arguments: args } = request.params;

  switch (name) {
    case "search_companies": {
      const params = new URLSearchParams();
      if (args.ticker) params.set("ticker", args.ticker);
      if (args.sector) params.set("sector", args.sector);
      if (args.min_leverage) params.set("min_leverage", args.min_leverage.toString());
      params.set("fields", args.fields || "ticker,name,net_leverage_ratio,total_debt");

      const response = await fetch(`${BASE_URL}/companies?${params}`, {
        headers: { "X-API-Key": API_KEY }
      });
      return { content: [{ type: "text", text: JSON.stringify(await response.json()) }] };
    }

    case "search_bonds": {
      const params = new URLSearchParams();
      if (args.ticker) params.set("ticker", args.ticker);
      if (args.min_ytm) {
        params.set("min_ytm", args.min_ytm.toString());
        params.set("has_pricing", "true");
      }
      if (args.seniority) params.set("seniority", args.seniority);
      params.set("fields", args.fields || "name,cusip,company_ticker,coupon_rate,maturity_date,pricing");

      const response = await fetch(`${BASE_URL}/bonds?${params}`, {
        headers: { "X-API-Key": API_KEY }
      });
      return { content: [{ type: "text", text: JSON.stringify(await response.json()) }] };
    }

    case "get_guarantors": {
      const response = await fetch(`${BASE_URL}/entities/traverse`, {
        method: "POST",
        headers: {
          "X-API-Key": API_KEY,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          start: { type: "bond", id: args.cusip },
          relationships: ["guarantees"],
          direction: "inbound",
          fields: ["name", "entity_type", "jurisdiction", "is_guarantor"]
        })
      });
      return { content: [{ type: "text", text: JSON.stringify(await response.json()) }] };
    }

    default:
      throw new Error(`Unknown tool: ${name}`);
  }
});

// Start server
const transport = new StdioServerTransport();
await server.connect(transport);
```

## Troubleshooting

### Server Not Loading

1. Check that your API key is set correctly in the config
2. Verify the server is installed: `which debtstack-mcp`
3. Check Claude Desktop logs for errors

### API Errors

If you see API errors, verify:
1. Your API key is valid
2. You have credits remaining
3. You're not exceeding rate limits

### Debugging

Enable verbose logging:

```json
{
  "mcpServers": {
    "debtstack": {
      "command": "debtstack-mcp",
      "env": {
        "DEBTSTACK_API_KEY": "ds_xxxxx",
        "DEBUG": "true"
      }
    }
  }
}
```

## Next Steps

<CardGroup cols={2}>
  <Card title="API Reference" icon="book" href="/api-reference/overview">
    Full API documentation
  </Card>
  <Card title="AI Agents Guide" icon="robot" href="/guides/ai-agents">
    Build custom AI agents
  </Card>
</CardGroup>
